<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Inventaris SKB Muara Badak</title>

<style>
body{font-family:Arial;margin:0;background:#f1f5f9}
.hidden{display:none}

/* LOGIN */
#loginBox{
max-width:420px;margin:90px auto;background:white;padding:30px;
border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.15);text-align:center
}
#loginBox img{height:80px;margin-bottom:10px}

/* HEADER */
header{background:#1e40af;color:white;padding:15px;display:flex;align-items:center}
header img{height:45px;margin-right:15px}

.container{padding:20px}

/* MENU & CARD */
.menu{display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap}
.menu button{padding:12px 18px;border:none;border-radius:8px;font-weight:bold;cursor:pointer}
.masuk{background:#2563eb;color:white}
.keluar{background:#dc2626;color:white}

.card{
background:white;padding:20px;border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,.1);margin-bottom:20px;flex:1
}

input,select,textarea{
width:100%;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #ccc
}

button.simpan{
background:#16a34a;color:white;border:none;padding:10px;
border-radius:6px;font-weight:bold;cursor:pointer
}

/* TABLE */
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#e5e7eb}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox">
    <img src="logo.png">
    <h2>Selamat Datang</h2>
    <p>Inventaris SKB Muara Badak</p>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button class="simpan" onclick="login()">Masuk</button>
</div>

<!-- DASHBOARD -->
<div id="app" class="hidden">

<header>
    <img src="logo.png">
    <h2>Dashboard Inventaris SKB Muara Badak</h2>
</header>

<div class="container">

<!-- RINGKASAN -->
<div class="menu">
    <div class="card">
        <h3>Total Barang Masuk</h3>
        <h1 id="totalMasuk">0</h1>
    </div>
    <div class="card">
        <h3>Total Barang Keluar</h3>
        <h1 id="totalKeluar">0</h1>
    </div>
    <div class="card">
        <h3>Stok Tersedia</h3>
        <h1 id="stok">0</h1>
    </div>
</div>

<!-- MENU -->
<div class="menu">
    <button class="masuk" onclick="showForm('masuk')">âž• Barang Masuk</button>
    <button class="keluar" onclick="showForm('keluar')">âž– Barang Keluar</button>
</div>

<!-- FORM MASUK -->
<div class="card hidden" id="formMasuk">
<h3>ðŸ“¥ Barang Masuk</h3>
<input id="mNama" placeholder="Nama Barang">
<input id="mJumlah" type="number" placeholder="Jumlah">
<textarea id="mKet" placeholder="Keterangan"></textarea>
<button class="simpan" onclick="simpanMasuk()">Simpan</button>
</div>

<!-- FORM KELUAR -->
<div class="card hidden" id="formKeluar">
<h3>ðŸ“¤ Barang Keluar</h3>
<input id="kNama" placeholder="Nama Barang">
<input id="kJumlah" type="number" placeholder="Jumlah">
<select id="kAmbil">
<option value="">-- Diambil Oleh --</option>
<option>Bu Munawarah. S.Pd</option>
<option>Bu Liliana Sataria. S.Kom</option>
<option>Bu Fatimah. S.Pd</option>
<option>Bu Fitriyana. S.Pd</option>
<option>Bu Hirda Yulinalmi</option>
<option>Bu Dwi Rika. S.Pd</option>
<option>Bu Uut</option>
<option>Pak Heri Sadiman. S.Pd</option>
<option>Pak Jemidin. S.Pd., M.Pd</option>
<option>Pak Rehan</option>
<option>Pak Yuan Reski Pongbanga. S.M</option> 
<option>Bu Rusdiana. S.Pd</option> 
<option>Bu Devi Subhanatulaini. S.Pd</option> 
<option>Bu Jumriana. s.Pd</option>
</select>
<textarea id="kKet" placeholder="Keterangan"></textarea>
<button class="simpan" onclick="simpanKeluar()">Simpan</button>
</div>

<!-- DATA INVENTARIS -->
<div class="card">
<h3>ðŸ“Š Data Inventaris</h3>
<table>
<thead>
<tr>
<th>No</th><th>Tanggal</th><th>Barang</th>
<th>Jenis</th><th>Jumlah</th><th>Keterangan</th>
</tr>
</thead>
<tbody id="tabel"></tbody>
</table>
</div>

<!-- STOK PER BARANG -->
<div class="card">
<h3>ðŸ“¦ Stok Per Barang</h3>
<table>
<thead>
<tr><th>Barang</th><th>Masuk</th><th>Keluar</th><th>Sisa</th></tr>
</thead>
<tbody id="stokBarang"></tbody>
</table>
</div>

<!-- REKAP BULANAN -->
<div class="card">
<h3>ðŸ“Š Rekap Bulanan</h3>
<select id="bulan">
<option value="0">Januari</option><option value="1">Februari</option>
<option value="2">Maret</option><option value="3">April</option>
<option value="4">Mei</option><option value="5">Juni</option>
<option value="6">Juli</option><option value="7">Agustus</option>
<option value="8">September</option><option value="9">Oktober</option>
<option value="10">November</option><option value="11">Desember</option>
</select>
<select id="tahun">
<option>2024</option><option selected>2025</option><option>2026</option>
</select>
<button class="simpan" onclick="rekapBulanan()">Tampilkan</button>
<p>Total Masuk: <b id="bm">0</b></p>
<p>Total Keluar: <b id="bk">0</b></p>
<p>Sisa Stok: <b id="bs">0</b></p>
</div>

<button class="simpan" onclick="exportExcel()">ðŸ“¥ Export Excel</button>

</div>
</div>

<script>
const USERNAME='admin', PASSWORD='12345';
let data = JSON.parse(localStorage.getItem('inventaris')) || [];

function login(){
    if(user.value===USERNAME && pass.value===PASSWORD){
        loginBox.style.display='none';
        app.classList.remove('hidden');
        tampil();
    }else alert('Username atau Password salah');
}

function showForm(j){
    formMasuk.classList.add('hidden');
    formKeluar.classList.add('hidden');
    if(j==='masuk') formMasuk.classList.remove('hidden');
    if(j==='keluar') formKeluar.classList.remove('hidden');
}

function simpanMasuk(){
    if(!mNama.value||mJumlah.value<=0) return alert('Data belum lengkap');
    data.push({tanggal:new Date().toLocaleDateString(),barang:mNama.value,jenis:'Masuk',jumlah:+mJumlah.value,ket:mKet.value});
    simpan();
}
function simpanKeluar(){
    if(!kNama.value||kJumlah.value<=0||!kAmbil.value) return alert('Data belum lengkap');
    data.push({tanggal:new Date().toLocaleDateString(),barang:kNama.value,jenis:'Keluar',jumlah:+kJumlah.value,ket:`Diambil oleh ${kAmbil.value} | ${kKet.value}`});
    simpan();
}
function simpan(){
    localStorage.setItem('inventaris',JSON.stringify(data));
    tampil();
}

function tampil(){
    let html='', masuk=0, keluar=0, barang={};
    data.forEach((d,i)=>{
        html+=`<tr><td>${i+1}</td><td>${d.tanggal}</td><td>${d.barang}</td><td>${d.jenis}</td><td>${d.jumlah}</td><td>${d.ket}</td></tr>`;
        if(!barang[d.barang]) barang[d.barang]={m:0,k:0};
        if(d.jenis==='Masuk'){masuk+=d.jumlah;barang[d.barang].m+=d.jumlah}
        if(d.jenis==='Keluar'){keluar+=d.jumlah;barang[d.barang].k+=d.jumlah}
    });
    tabel.innerHTML=html;
    totalMasuk.innerText=masuk;
    totalKeluar.innerText=keluar;
    stok.innerText=masuk-keluar;

    let sb='';
    for(let b in barang){
        sb+=`<tr><td>${b}</td><td>${barang[b].m}</td><td>${barang[b].k}</td><td>${barang[b].m-barang[b].k}</td></tr>`;
    }
    stokBarang.innerHTML=sb;
}

function rekapBulanan(){
    let m=0,k=0,b=parseInt(bulan.value),t=parseInt(tahun.value);
    data.forEach(d=>{
        let dt=new Date(d.tanggal);
        if(dt.getMonth()===b && dt.getFullYear()===t){
            if(d.jenis==='Masuk') m+=d.jumlah;
            if(d.jenis==='Keluar') k+=d.jumlah;
        }
    });
    bm.innerText=m; bk.innerText=k; bs.innerText=m-k;
}

function exportExcel(){
    let csv='No,Tanggal,Barang,Jenis,Jumlah,Keterangan\n';
    data.forEach((d,i)=>csv+=`${i+1},${d.tanggal},${d.barang},${d.jenis},${d.jumlah},"${d.ket}"\n`);
    const a=document.createElement('a');
    a.href=URL.createObjectURL(new Blob([csv],{type:'text/csv'}));
    a.download='Inventaris_SKB_Muara_Badak.csv';
    a.click();
}
</script>

</body>
</html>
